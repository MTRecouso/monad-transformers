(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";exports.promise={name:"promise",of:function(n){return function(t){return t(n)}},map:function(n,t){return function(u){t(function(t){return u(n(t))})}},flat:function(n,t){return function(u){n(function(n){t.map(function(r){r(function(r){u(t.map(function(){return r},n))})},n)})}}};

},{}],2:[function(require,module,exports){
"use strict";exports.prim=require("./prim"),exports.data=require("./data"),exports.comp=require("./comp"),exports.make=function(r,t){function e(r){var t=Object.create(u);return t._value=r,t}function n(n){return e(t.of(r.of(n)))}var u={map:function(n){return e(t.map(function(t){return r.map(n,t)},this._value))},flatMap:function(n){var u=function(r){return n(r)._value};return e(t.flatMap(function(e){return r.flatMap(u,e,t)},this._value,r))}};return n.prototype=u,n},exports.print=function(r){return console.log(r),r};

},{"./comp":1,"./data":3,"./prim":4}],3:[function(require,module,exports){
"use strict";exports.id={name:"id",of:function(a){return{idVal:a}},map:function(a,n){return{idVal:a(n.idVal)}},flatMap:function(a,n,e){return{idVal:e.flatMap(function(n){return a(n.idVal)},n.idVal)}}},exports.maybe={name:"maybe",of:function(a){return{maybeVal:a}},map:function(a,n){return{maybeVal:void 0===n.maybeVal?n.maybeVal:a(n.maybeVal)}},flatMap:function(a,n,e){return{maybeVal:e.flatMap(function(e){return void 0===e.maybeVal?n.maybeVal:a(n.maybeVal)},n.maybeVal)}}};

},{}],4:[function(require,module,exports){
"use strict";exports.list={name:"list",of:function(n){return n.constructor===Array?n:[n]},map:function(n,r){return r.map(n)},flatMap:function(n,r,t){return r.reduce(function(n,r){return t.funk(r)},[])},flat:function(n,r){return n.reduce(function(n,t){for(var u=-1,e=!1;!e;)n.push(r.map(function(n){return u++,u-1===n.length&&(e=!0),n[u]},t));return n},[])}};

},{}]},{},[1,2,3,4])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjOlxcZ2l0LXByb2plY3RzXFxzb25uZVxcbGliXFxjb21wLmpzIiwiYzpcXGdpdC1wcm9qZWN0c1xcc29ubmVcXGxpYlxcY29yZS5qcyIsImM6XFxnaXQtcHJvamVjdHNcXHNvbm5lXFxsaWJcXGRhdGEuanMiLCJjOlxcZ2l0LXByb2plY3RzXFxzb25uZVxcbGliXFxwcmltLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO1lDQUEsU0FBUSxTQUNOLEtBQU0sVUFDTixHQUFJLFNBQVUsR0FBTSxNQUFPLFVBQVUsR0FBVyxNQUFPLEdBQVEsS0FDL0QsSUFBSyxTQUFVLEVBQU0sR0FDbkIsTUFBTyxVQUFVLEdBQ2YsRUFBSSxTQUFVLEdBQ1osTUFBTyxHQUFRLEVBQUssUUFLMUIsS0FBTSxTQUFVLEVBQUssR0FDbkIsTUFBTyxVQUFVLEdBQ2YsRUFBSSxTQUFVLEdBQ1osRUFBVyxJQUFJLFNBQVUsR0FDdkIsRUFBYSxTQUFVLEdBQ3JCLEVBQVEsRUFBVyxJQUFJLFdBQWEsTUFBTyxJQUFRLE9BRXBEOztBQWxCWCxPQUFPLENBQUMsT0FBTyxHQUFHO0FBQ2hCLE1BQUksRUFBRSxJQ0RSLEtEQ2lCLElDRFQsS0FBTyxRQUFRLFVBQ3ZCLFFBQVEsS0FBTyxRQUFRLFVBQ3ZCLFFBQVEsS0FBTyxRQUFRLFVBRXZCLFFBQVEsS0FBTyxTQUFxQixFQUFJLEdBZ0J0QyxRQUFTLEdBQVEsR0FDZixHQUFJLEdBQU0sT0FBTyxPQUFPLEVBRXhCLE9BREEsR0FBSSxPQUFTLEVBQ04sRUFHVCxRQUFTLEdBQU0sR0FDYixNQUFPLEdBQU8sRUFBRyxHQUFHLEVBQUcsR0FBRyxLQXRCNUIsR0FBSSxJQUNGLElBQUssU0FBVSxHQUNiLE1BQU8sR0FBTyxFQUFHLElBQUksU0FBVSxHQUM3QixNQUFPLEdB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Q0FBQSxDQ0NFLEdBQUcsRUFBRTtBQUNsQyxBQ0xOLEFDREEsSUFBRSxDRENDLENDREMsQ0hLQyxBRUpBLENGSUMsQ0FBQSxNQ0NPLEVBQUUsQ0FBQyxBRU5GLEVEQ0MsQ0RLSSxBRU5GLENGTUcsQ0VORCxDRENBLEVES0ssQUNMSCxFREtLLENDTEYsRURLSyxBQ0xILENES0ksQ0FBQTtBQ0o1QixBQ0ZtQixLSE1sQixDQUFBLENDQ0UsRUFBRSxFQ0xFLEFDRm1CLEVGT2pCLENBQUMsQUVQbUIsQ0FBQyxLRk9kLENBQUMsQ0FBQyxDQUFBLEdFUHVCLEtBQUssS0FBSyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FERy9ELEdGSUgsQUdQb0UsRUZRbEUsTUNMTSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO0FETXhCLEFFUkYsS0RHRyxBQ0hBLENER0EsQ0NIRSxJRlFJLEVBQUUsT0VSSSxJQUFJLEVBQUUsR0FBRyxDRlFILENFUkssR0ZRRCxFQUFFO0FEQTNCLEFDQ0ksQUVSRixHREdELEdGSUcsRUFBRSxFQ0NFLENFUkMsR0FBRyxDRlFDLEFFUkEsR0ZRRyxBRVJBLENBQUMsR0hPRCxDR1BLLENBQUMsQ0hPSCxBR1BHLEVIT0QsQUNDYixLQUFLLENBQWEsR0FBRyxDRERFLENDQ0EsQ0RERTtBQUMvQixBQ0NJLEFDTE4sR0NIQyxNREdNLEVGSUUsQUVKQSxJREtJLElBQUksQ0FBQyxDRERDLEVDQ0UsQ0FBQyxDQUFDLEdEREcsQUVKUCxFRklTLENDQ0MsQ0FBQSxBQ0xOLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRTtBRkt0QyxBRUpGLEFDSEYsT0ZRSyxDQUFBLENEREUsQUdQQSxDSE9DLENFSkMsQUNIQSxTSE9TLENBQUMsRUFBRSxLR1BGLElBQUksRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFO0FIUXBDLEFDQ0YsQUNMQSxBQ0hGLFdER08sQUNIQSxFRlFFLEFDTEEsQ0NIQyxDQUFDLEdIT0csQ0FBQyxBQ0NBLENBQUMsQ0VSQyxDSE9DLEFDQ0EsQUVSQSxDSE9DLEFDQ0EsQUNMQSxDQUFDLE1ES00sQ0FBQyxBQ0xBLENBQUMsQUNIQSxDSE9DLEdHUEcsRUFBRSxHRlFHLEFFUkEsQ0RHQyxDQ0hDLENGUUMsQ0REQyxDQ0NDLENEREMsRUVKRSxFQUFFO0FGS3pDLEFDQ0YsQUNMQSxBQ0hGLGFBQU8sRUZRRSxBQ0xBLEVES0UsQ0FBQyxDQ0xDLENBQUMsRUZJRSxDQUFDLEFHUEEsQ0FBQyxDRlFDLENBQUMsQ0NMQyxDQUFDLEFDSEEsQ0FBQyxFRlFFLENFUkMsQ0hPQyxBQ0NBLEFDTEEsQUNIQSxDREdDLEFDSEQsQ0RHQyxDREtFLEVEREUsQUNDQSxFRERFLEFDQ0EsQ0FBQyxDQUFBO0FEQTdCLEtHUFAsRUZRRSxBQ0xBLEFDSEEsRUZRRSxBQ0xBLEFDSEEsQ0FBQyxDQUFBLENER0UsQ0RLQyxBQ0xBLENES0MsSUNMSSxDRklDLEFFSkEsQ0ZJQyxBQ0NBLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQSxHRERJLENBQUMsR0FBRyxDQUFDLFlBQVk7QUFBQyxHR043QyxFRlFFLEFDTEEsQ0FBQSxlRkdrRCxLQUFLLENBQUE7R0NHekQsQUNMQSxDREtBLFNESDBELEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQ0loRSxBRVJBLENER0QsQ0FBQSxJQ0hLLEVBQUUsR0hLRyxBQ0dBLENESEMsQ0FBQSxJQ0dLLENBQUUsSUVSRCxDRlFNLEVBQUUsQUVSTCxFQUFFLFVBQVUsRUFBRTtBRlMvQixBRVJBLFFGUUksQ0RIQyxFQUFFLEFDR0EsQUVSQSxDSEtDLENBQUMsQ0FBQSxBQ0dDLEFFUkEsQ0FBQyxLRlFLLENBQUMsQUVSQSxDQUFDLEtGUUssQ0FBQyxJRVJJLENGUUMsQ0FBQyxDQUFBLENFUkUsRUFBRSxDQUFDLEVBQUU7QUZTckMsQUNMSixBQ0hNLE9ITUMsQUNFQSxBQ0xBLENGR0MsQUNFQSxBQ0xBLENGR0EsQ0dORSxHREdHLENES0MsQ0VSQyxDREdDLENES0MsQ0VSQyxDQUFDLENBQUMsQ0FBQSxDRlFFLENBQUE7QUFDbEIsQUNMRixBQ0hJLEtITUQsQ0FBQSxBRUhDLEVBQUUsRUNIRSxDRlFDLEdBQUcsQUVSQSxDRlFBLEFDTEMsRUNIRSxLQUFLLENBQUE7QURJcEIsQUNISSxHSE1ILEFDRUEsQ0NMQyxFQUFFLE9DSE8sQ0FBQyxJREdFLEFDSEUsRUFBRSxDREdELEVBQUU7QUFBRSxBQ0ZmLENITVAsQ0FBQSxTRUo2QixDQ0ZsQixDREVtQixBQ0ZsQixJQUFJLENBQUMsR0RFcUIsRUFBRSxHQUFHLEVBQUUsQUNGbEIsQ0RFa0IsQUNGakIsR0FBRyxDQUFDLFVBQVUsU0FBUyxFQUFFO0FGU3BELEFFUlEsR0RDc0MsUURPckMsSUFBSSxBRVJBLENGUUUsQ0VSQSxDQUFBLEdGUUssRUFBRTtBQUNwQixBQ1BGLEFDRFEsS0RDTCxFQUFFLElET0ksR0VSRyxHRlFHLENBQUMsQ0VSQyxDRlFDLEFDUEgsQ0RPSSxDRVJDLENGUUMsQUVSQSxDRlFDLEFDUEgsRURPSyxBQ1BILENET0ksQ0VSQyxDRlFDLEFDUEgsQ0RPSSxDQ1BGLElET08sQ0FBQyxDQUFDLEFFUkEsQ0ZRQyxBRVJBLENGUUEsS0VSTSxFQUFFO0FERTFDLEFDRjJDLEdGUzVDLFFDUFEsS0NGd0MsR0FBRyxJQUFJLENBQUE7QUZVeEQsQUNQRSxNRE9FLENBQUMsSUVWb0QsR0RHL0MsRURPSSxBQ1BGLEdET0ssQUNQRixDQUFDLElET00sQ0FBQSxHQ1BFLEtBQUssU0FBUyxHQUFHLEdBQUcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7QURRMUUsQUVWUSxLREdMLENBQUEsR0RPSSxJQUFJLENBQUEsR0VWSSxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUE7Q0ZXaEMsQ0FBQSxDQ1BFLE1DSE0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO0FESVosT0NISyxFREdFLEVBQUUsaUJBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUU7QURRNUMsQUNQSSxBQ0hFLE9GVUMsQ0FBQyxHQ1BHLEVET0UsQUVWQSxHRlVHLENFVkMsQ0FBQSxPRlVRLEtBQUssQ0FBRSxHQUFHLEVBQUU7QUFBQyxBQ05oQyxLQ0hELEVBQUUsRUZTc0MsQUVUcEMsQ0ZTcUMsQUVUcEMsQ0FBQSxFRlN1QyxDQUFDLEFDTnBDLEVBQUUsQ0RNcUMsQ0FBQyxDQUFDLE9BQU8sQUNOcEMsQ0FBQyxFRE1zQyxDQUFBLElDTi9CLENBQUMsVUFBVSxVQUFVLEVBQUU7QUFDakQsQ0RLMEQsQ0FBQSxDRVIvRCxZREdZLFVBQVUsQ0FBQyxRQUFRLEtBQUssU0FBUyxHQUFHLEdBQUcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQTtPQUM3RSxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUM7Q0NGckIsQ0FBQSxHREdJLENBQUE7R0FDRjtDQUNGLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0cy5wcm9taXNlID0ge1xyXG4gIG5hbWU6ICdwcm9taXNlJyxcclxuICBvZjogZnVuY3Rpb24gKHZhbCkge3JldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gcmVzb2x2ZSh2YWwpfSB9LFxyXG4gIG1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgIHZhbChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gcmVzb2x2ZShmdW5rKHZhbHVlKSlcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBmbGF0OiBmdW5jdGlvbiAodmFsLCBpbm5lck1vbmFkKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgdmFsKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgaW5uZXJNb25hZC5tYXAoZnVuY3Rpb24gKGlubmVyUHJvbWlzZSkge1xyXG4gICAgICAgICAgaW5uZXJQcm9taXNlKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXNvbHZlKGlubmVyTW9uYWQubWFwKGZ1bmN0aW9uICgpIHtyZXR1cm4gdmFsdWV9LCBpKSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgaSlcclxuXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydHMucHJpbSA9IHJlcXVpcmUoJy4vcHJpbScpXHJcbmV4cG9ydHMuZGF0YSA9IHJlcXVpcmUoJy4vZGF0YScpXHJcbmV4cG9ydHMuY29tcCA9IHJlcXVpcmUoJy4vY29tcCcpXHJcblxyXG5leHBvcnRzLm1ha2UgPSBmdW5jdGlvbiBtYWtlX21vbmFkIChtMSwgbTIpIHtcclxuICB2YXIgcHJvdG8gPSB7XHJcbiAgICBtYXA6IGZ1bmN0aW9uIChmdW5rKSB7XHJcbiAgICAgIHJldHVybiBjcmVhdGUobTIubWFwKGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICByZXR1cm4gbTEubWFwKGZ1bmssIHZhbClcclxuICAgICAgfSwgdGhpcy5fdmFsdWUpKVxyXG4gICAgfSxcclxuICAgIGZsYXRNYXA6IGZ1bmN0aW9uIChmdW5rKSB7XHJcbiAgICAgIHZhciBmdW5rayA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICByZXR1cm4gZnVuayh2YWwpLl92YWx1ZVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjcmVhdGUobTIuZmxhdE1hcChmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIG0xLmZsYXRNYXAoZnVua2ssIHZhbCwgbTIpXHJcbiAgICAgIH0sIHRoaXMuX3ZhbHVlLCBtMSkpXHJcbiAgICB9XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGNyZWF0ZSAodmFsdWUpIHtcclxuICAgIHZhciBvYmogPSBPYmplY3QuY3JlYXRlKHByb3RvKVxyXG4gICAgb2JqLl92YWx1ZSA9IHZhbHVlXHJcbiAgICByZXR1cm4gb2JqXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBtYWtlICh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZShtMi5vZihtMS5vZih2YWx1ZSkpKVxyXG4gIH1cclxuICBtYWtlLnByb3RvdHlwZSA9IHByb3RvXHJcbiAgcmV0dXJuIG1ha2VcclxufVxyXG5cclxuZXhwb3J0cy5wcmludCA9IGZ1bmN0aW9uIHByaW50ICh2YWwpIHtjb25zb2xlLmxvZyh2YWwpO3JldHVybiB2YWx9XHJcbiIsImV4cG9ydHMuaWQgPSB7XHJcbiAgbmFtZTogJ2lkJyxcclxuICBvZjogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4ge2lkVmFsOiB2YWwgfSB9LFxyXG4gIG1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWRWYWw6IGZ1bmsodmFsLmlkVmFsKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgZmxhdE1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCwgaW5uZXJNb25hZCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWRWYWw6IGlubmVyTW9uYWQuZmxhdE1hcChmdW5jdGlvbiAoaW5uZXJJZCkge1xyXG4gICAgICAgIHJldHVybiBmdW5rKGlubmVySWQuaWRWYWwpXHJcbiAgICAgIH0sIHZhbC5pZFZhbClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydHMubWF5YmUgPSB7XHJcbiAgbmFtZTogJ21heWJlJyxcclxuICBvZjogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4ge21heWJlVmFsOiB2YWwgfSB9LFxyXG4gIG1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgIG1heWJlVmFsOiB2YWwubWF5YmVWYWwgPT09IHVuZGVmaW5lZCA/IHZhbC5tYXliZVZhbCA6IGZ1bmsodmFsLm1heWJlVmFsKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgZmxhdE1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCwgaW5uZXJNb25hZCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWF5YmVWYWw6IGlubmVyTW9uYWQuZmxhdE1hcChmdW5jdGlvbiAoaW5uZXJNYXliZSkge1xyXG4gICAgICAgIHJldHVybiBpbm5lck1heWJlLm1heWJlVmFsID09PSB1bmRlZmluZWQgPyB2YWwubWF5YmVWYWwgOiBmdW5rKHZhbC5tYXliZVZhbClcclxuICAgICAgfSwgdmFsLm1heWJlVmFsKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnRzLmxpc3QgPSB7XHJcbiAgbmFtZTogJ2xpc3QnLFxyXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB2YWwuY29uc3RydWN0b3IgPT09IEFycmF5ID8gdmFsIDogW3ZhbF0gfSxcclxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcclxuICAgIHJldHVybiB2YWwubWFwKGZ1bmspXHJcbiAgfSxcclxuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsLCBpbm5lck1vbmFkKSB7XHJcbiAgICByZXR1cm4gdmFsLnJlZHVjZShmdW5jdGlvbiAobGlzdCwgdmFsKSB7XHJcbiAgICAgIHJldHVybiBpbm5lck1vbmFkLmZ1bmsodmFsKVxyXG4gICAgfSwgW10pXHJcbiAgfSxcclxuXHJcbiAgZmxhdDogZnVuY3Rpb24gKHZhbCwgaW5uZXJNb25hZCkge1xyXG4gICAgcmV0dXJuIHZhbC5yZWR1Y2UoZnVuY3Rpb24gKGxpc3QsIGkpIHtcclxuICAgICAgdmFyIGluZGV4ID0gLTFcclxuICAgICAgdmFyIG92ZXIgPSBmYWxzZVxyXG4gICAgICB3aGlsZSAoIW92ZXIpIHtcclxuICAgICAgICBsaXN0LnB1c2goaW5uZXJNb25hZC5tYXAoZnVuY3Rpb24gKGlubmVyTGlzdCkge1xyXG4gICAgICAgICAgaW5kZXgrK1xyXG4gICAgICAgICAgaWYgKGluZGV4IC0gMSA9PT0gaW5uZXJMaXN0Lmxlbmd0aCkge292ZXIgPSB0cnVlfVxyXG4gICAgICAgICAgcmV0dXJuIGlubmVyTGlzdFtpbmRleF1cclxuICAgICAgICB9LCBpKSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbGlzdFxyXG4gICAgfSwgW10pXHJcbiAgfVxyXG5cclxufVxyXG4iXX0=
