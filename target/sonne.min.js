(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";exports.promise={name:"promise",of:function(n){return function(t){return t(n)}},map:function(n,t){return function(u){t(function(t){return u(n(t))})}},flat:function(n,t){return function(u){n(function(n){t.map(function(r){r(function(r){u(t.map(function(){return r},n))})},n)})}}};

},{}],2:[function(require,module,exports){
"use strict";exports.id={name:"id",of:function(a){return{idVal:a}},map:function(a,n){return{idVal:a(n.idVal)}},flatMap:function(a,n,e){return e.flatMap(function(n){return a(n.idVal)},n,e.inner)}},exports.maybe={name:"maybe",of:function(a){return{maybeVal:a}},map:function(a,n){return{maybeVal:void 0===n.maybeVal?n.maybeVal:a(n.maybeVal)}},flatMap:function(a,n,e){return e.flatMap(function(n){return void 0===n.maybeVal?n.maybeVal:a(n.maybeVal)},n,e.inner)}};

},{}],3:[function(require,module,exports){
"use strict";exports.prim=require("./prim"),exports.data=require("./data"),exports.comp=require("./comp");var id={of:function(r){return r},map:function(r,t){return r(t)},flatMap:function(r,t){return r(t)}};exports.make=function(r,t){function n(r){var t=Object.create(u);return t._value=r,t}function e(e){return n(t.of(r.of(e)))}r.inner=t,t.inner=id;var u={map:function(e){return n(t.map(function(t){return r.map(e,t)},this._value))},flatMap:function(e){var u=function(r){return e(r)._value};return n(r.flatMap(u,this._value,t))}};return e.prototype=u,e},exports.print=function(r){return console.log(r),r};

},{"./comp":1,"./data":2,"./prim":4}],4:[function(require,module,exports){
"use strict";exports.list={name:"list",of:function(n){return n.constructor===Array?n:[n]},map:function(n,r){return r.map(n)},flatMap:function(n,r,t){return r.reduce(function(n,r){return t.funk(r)},[])},flat:function(n,r){return n.reduce(function(n,t){for(var u=-1,e=!1;!e;)n.push(r.map(function(n){return u++,u-1===n.length&&(e=!0),n[u]},t));return n},[])}};

},{}]},{},[1,2,3,4])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvYm9yaXNtYXJpbm92L3Nvbm5lL2xpYi9jb21wLmpzIiwiL1VzZXJzL2JvcmlzbWFyaW5vdi9zb25uZS9saWIvZGF0YS5qcyIsIi9Vc2Vycy9ib3Jpc21hcmlub3Yvc29ubmUvbGliL21haW4uanMiLCIvVXNlcnMvYm9yaXNtYXJpbm92L3Nvbm5lL2xpYi9wcmltLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO1lDQUEsU0FBUSxTQUNOLEtBQU0sVUFDTixHQUFJLFNBQVUsR0FBTSxNQUFPLFVBQVUsR0FBVyxNQUFPLEdBQVEsS0FDL0QsSUFBSyxTQUFVLEVBQU0sR0FDbkIsTUFBTyxVQUFVLEdBQ2YsRUFBSSxTQUFVLEdBQ1osTUFBTyxHQUFRLEVBQUssUUFLMUIsS0FBTSxTQUFVLEVBQUssR0FDbkIsTUFBTyxVQUFVLEdBQ2YsRUFBSSxTQUFVLEdBQ1osRUFBVyxJQUFJLFNBQVUsR0FDdkIsRUFBYSxTQUFVLEdBQ3JCLEVBQVEsRUFBVyxJQUFJLFdBQWEsTUFBTyxJQUFRLE9BRXBEOztBQWxCWCxPQUFPLENBQUMsT0FBTyxHQUFHO0FBQ2hCLE1BQUksRUFBRSxJQ0RSLEtEQ2lCLElDRFQsSUFDTixLQUFNLEtBQ04sR0FBSSxTQUFVLEdBQU8sT0FBUSxNQUFPLElBQ3BDLElBQUssU0FBVSxFQUFNLEdBQ25CLE9BQ0UsTUFBTyxFQUFLLEVBQUksU0FHcEIsUUFBUyxTQUFVLEVBQU0sRUFBSyxHQUM1QixNQUFPLEdBQVcsUUFBUSxTQUFVLEdBQ2xDLE1BQU8sR0FBSyxFQUFRLFFBQ25CLEVBQUssRUFBVyxTQUl2QixRQUFRLE9BQ04sS0FBTSxRQUNOLEdBQUksU0FBVSxHQUFPLE9BQVEsU0FBVSxJQUN2QyxJQUFLLFNBQVUsRUFBTSxHQUNuQixPQUNBLFNBQTJCLFNB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REEsQ0RDQyxBQ0RBLEtEQ0ssQ0FBQyxDQUFDLENBQUE7QUVEbkMsQUNIRSxJREdJLEFDSEYsQ0ZJQyxDQUFBLEFDREcsQUNIRixDSEtDLENBQUMsQ0FBQSxBRUZHLFNDSEssR0FBRyxFQUFFO0FESW5CLEFDSnFCLEdGS3BCLENDREMsQ0ZFQyxDQUFBLEFFRkMsS0NKd0IsR0FBRyxDQUFDLEdESWxCLEdBQUcsRUFBRSxHQ0p3QixLQUFLLEtBQUssR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtBRk1uRSxBQ0RFLEdGRUQsQUdQb0UsTUZNOUQsRUFBRSxBQ0RBLEdBQUcsQ0FBQSxhRENPLElBQUksRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFO0FBQ3hDLEFFTkYsR0RLQyxFQ0xFLEVBQUUsSUZNSSxTRU5NLENGTUksQ0FBQyxFRU5ELEVBQUUsR0ZNTSxBRU5ILENGTUksQ0VORixTRk1ZLE9BQU8sRUFBRTtBREUvQyxBQ0RJLEFDREosQUNMRSxLREtDLENGRUMsQ0VGQyxDRkVDLEdHUEcsRUZNRSxDRU5DLENBQUMsRUZNRSxDQUFDLEFFTkEsQ0FBQyxDREtGLEVGRUMsQ0dQSyxDREtGLEFDTEcsQ0hPSCxBQ0RJLEFFTkQsQ0ZNRSxBQ0RILENGRUEsRUVGRyxFRENLLEFDREgsQ0RDSSxDQUFBLElEQ0MsRUFBRTtBQUMvQixBRUZBLEdDTEQsRUZNRSxFQUFFLEdBQUcsQ0RDQyxBRUZBLENEQ0MsR0NERyxDQUFDLEdBQUcsQ0FBQyxDRkVDLEFFRkQsQ0RDRSxDQUFDLEtEQ0ssQUNEQSxDQUFDLENEQ0MsQUNERDtBREV2QixBR1BKLEdGTUMsQUNEQSxNRkVNLEFHUEEsQ0hPQyxDR1BDLFNIT1MsQ0FBQyxFQUFFLEtHUEYsSUFBSSxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUhRcEMsQUVGTixBQ0xFLENGTUgsQ0FBQSxPQ0RRLEVBQUUsQUNMQSxHQUFHLENBQUMsR0hPRyxDQUFDLEVHUEUsQ0hPQyxBR1BBLENIT0MsS0VGRixJQUFJLEFDTE8sQ0hPQyxDRUZOLEVDTFMsQ0RLTixDQ0xRLENES04sRUNMUyxFQUFFLEVIT0UsRUFBRTtBQUNyQyxBRUZOLEFDTEUsV0RLSyxFQ0xFLEVES0UsQ0FBQyxHQUFHLENBQUMsQ0FBQSxDRkVFLENBQUMsQUdQQSxDQUFDLElBQUksQ0FBQyxHQUFHLENIT0MsQUdQQSxDQUFBLElIT0ssRUFBRTtBQUM1QixBQ0RaLEdDREcsRUNMRSxFRk1FLEFFTkEsQ0ZNQyxDRU5DLENBQUMsQ0FBQSxFRk1HLEdBQUcsR0RDRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsWUFBWTtBQUFDLEFDQTlDLENDREQsQ0FBQSxDQ0xFLEdGTUcsRUFBRSxPQUFPLE1EQXdDLEtBQUssQ0FBQTtBQ0MxRCxJQUFFLEVBQUUsT0REdUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxBQ0NsRCxDRERrRCxFQ0MvQyxFQUFFO0FBQUUsQUNBdkIsQUNMRSxNQUFJLENES0MsQ0FBQyxBQ0xBLEdIS0csQUNBbUIsQ0RBbEIsQUVBQSxDRkFBLEFDQW1CLEVDQWhCLE1EQXdCLENFTHJCLENGS3VCLENDQWpCLENDTEgsQ0ZLdUIsQ0VMckIsQ0ZLdUIsQ0FBQSxLQ0FaLENBQUUsRUFBRSxBQ0xMLEVES08sQUNMTCxFREtPLEVBQUU7QUFDMUMsQUNMRSxHRkk0QyxDQ0M1QyxDQUFDLElGQUksQ0VBQyxDRkFDLEFHTEEsQ0hLQyxDQUFDLEFFQUEsQ0ZBQSxBR0xDLENES0MsQUNMQSxDREtBLEtDTE0sQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDLEVBQUU7QUZLdkMsQUNDQSxBQ0xJLElES0YsQ0REQyxBQ0NBLEVGQ0UsQUNGQSxDREVDLENBQUEsQ0VERSxBQ0xBLEdES0csRUFBRSxBQ0xBLENES0EsRUNMRyxDQUFDLENGSUYsQUVKRyxDQUFBLEdGSUMsRUFBRSxHQUFHLEVBQUU7QUFDeEIsQUNDRixBQ0xJLEtITUQsQ0FBQSxBRURDLElDTEksQ0ZJQyxBQ0NBLEdBQUcsQUNMQSxHQUFHLEtBQUssQ0FBQTtBRktsQixBQ0NBLEFDTEUsR0hNSCxJRURJLEVBQUUsSUNMSSxDRklELEFFSkUsRUZJQSxFRUpJLENGSUQsQ0FBQyxBRUpFLEVES0QsSUFBSSxFRERHLEFDQ0QsS0RETSxTQUFTLEdBQUcsR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQ0V0RSxBQ0xFLENITVAsQ0FBQSxHQ0ZJLENBQUEsTUVKTyxDREtDLEFDTEEsSUFBSSxDQUFDLENES0MsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENDTEMsQ0FBQyxHQUFHLENBQUMsSURLSSxHQUFHLEVBQUUsQ0NMQyxTQUFTLEVBQUU7QURNOUMsQUNMRSxHRklQLFlDQ1ksQUNMQSxFREtFLEFDTEEsQ0RLQyxBQ0xELEdES0ksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUE7QURBOUIsQUVKUSxPREtILEVEREUsQUNDQSxFRERFLEVDQ0UsQ0FBQyxBQ0xBLEtBQUssQ0RLQyxDQUFDLENBQUMsQUNMQSxDREtBLEFDTEMsS0ZJRixBRUpPLElGSUgsRUFBRSxHQUFHLEFFSk8sQ0FBQyxDRklOLEtFSlksRUFBRSxHRklKLEVBQUU7QUFDeEMsQUVMMkMsS0RNMUMsTURETSxLRUx3QyxHQUFHLEVGS2pDLENBQUMsQ0VMb0MsQ0FBQSxLRks3QixDQUFDLFVBQVUsVUFBVSxFQUFFO0FBQzlDLEFDQ0YsV0FBTyxBQ1BnRCxFRk05QyxBQ0NBLFVERFUsQ0FBQyxNQ0NELEVERFMsRUNDTCxFQUFFLENERFEsU0FBUyxHQUFHLFVBQVUsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtBQ0UxRixBQ1BJLEtGTUwsRUFBRSxHQUFHLEFDQ0EsRURERSxHQ0NHLEVDUEUsQ0RPQyxJRERJLENBQUMsR0VORyxDRE9oQixBQ1BpQixDRk1DLENBQUMsQ0FBQSxFQ0NkLEFDUGlCLENET0osQUNQSyxDQUFBLEVET0YsRUFBRTtBQUN6QixHRERMLE1FTk0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDRE9DLEFDUEQsSURPSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQTtDREE5QixDQUFBLEtDQ00sQUNQQSxDRE9BO0FBQ0QsQUNQQSxhRE9PLEFDUEEsSUFBSSxDQUFBLENET0UsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUE7S0FDbEQsQUNQQSxFQUFFLEVBQUUsQ0FBQyxDQUFBO0dEUVAsQUNQQSxDRE9BOztBQUVELENDUEQsQ0FBQSxTRE9VLE1BQU0sQ0FBRSxLQUFLLEVBQUU7QUFDdEIsUUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUM5QixPQUFHLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQTtBQUNsQixXQUFPLEdBQUcsQ0FBQTtHQUNYOztBQUVELFdBQVMsSUFBSSxDQUFFLEtBQUssRUFBRTtBQUNwQixXQUFPLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0dBQ25DOztBQUVELE1BQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFBO0FBQ3RCLFNBQU8sSUFBSSxDQUFBO0NBQ1osQ0FBQTs7QUFFRCxPQUFPLENBQUMsS0FBSyxHQUFHLFNBQVMsS0FBSyxDQUFFLEdBQUcsRUFBRTtBQUFDLFNBQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUE7Q0FBQyxDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImV4cG9ydHMucHJvbWlzZSA9IHtcbiAgbmFtZTogJ3Byb21pc2UnLFxuICBvZjogZnVuY3Rpb24gKHZhbCkge3JldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gcmVzb2x2ZSh2YWwpfSB9LFxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIHZhbChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoZnVuayh2YWx1ZSkpXG4gICAgICB9KVxuICAgIH1cbiAgfSxcblxuICBmbGF0OiBmdW5jdGlvbiAodmFsLCBpbm5lck1vbmFkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICB2YWwoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgaW5uZXJNb25hZC5tYXAoZnVuY3Rpb24gKGlubmVyUHJvbWlzZSkge1xuICAgICAgICAgIGlubmVyUHJvbWlzZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaW5uZXJNb25hZC5tYXAoZnVuY3Rpb24gKCkge3JldHVybiB2YWx1ZX0sIGkpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0sIGkpXG5cbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCJleHBvcnRzLmlkID0ge1xuICBuYW1lOiAnaWQnLFxuICBvZjogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4ge2lkVmFsOiB2YWwgfSB9LFxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWRWYWw6IGZ1bmsodmFsLmlkVmFsKVxuICAgIH1cbiAgfSxcbiAgZmxhdE1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCwgaW5uZXJNb25hZCkge1xuICAgIHJldHVybiBpbm5lck1vbmFkLmZsYXRNYXAoZnVuY3Rpb24gKGlubmVySWQpIHtcbiAgICAgIHJldHVybiBmdW5rKGlubmVySWQuaWRWYWwpXG4gICAgfSwgdmFsLCBpbm5lck1vbmFkLmlubmVyKVxuICB9XG59XG5cbmV4cG9ydHMubWF5YmUgPSB7XG4gIG5hbWU6ICdtYXliZScsXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB7bWF5YmVWYWw6IHZhbCB9IH0sXG4gIG1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCkge1xuICAgIHJldHVybiB7XG4gICAgbWF5YmVWYWw6IHZhbC5tYXliZVZhbCA9PT0gdW5kZWZpbmVkID8gdmFsLm1heWJlVmFsIDogZnVuayh2YWwubWF5YmVWYWwpXG4gICAgfVxuICB9LFxuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsLCBpbm5lck1vbmFkKSB7XG4gICAgcmV0dXJuIGlubmVyTW9uYWQuZmxhdE1hcChmdW5jdGlvbiAoaW5uZXJNYXliZSkge1xuICAgICAgcmV0dXJuIGlubmVyTWF5YmUubWF5YmVWYWwgPT09IHVuZGVmaW5lZCA/IGlubmVyTWF5YmUubWF5YmVWYWwgOiBmdW5rKGlubmVyTWF5YmUubWF5YmVWYWwpXG4gICAgfSwgdmFsLCBpbm5lck1vbmFkLmlubmVyKVxuICB9XG59XG4iLCJleHBvcnRzLnByaW0gPSByZXF1aXJlKCcuL3ByaW0nKVxuZXhwb3J0cy5kYXRhID0gcmVxdWlyZSgnLi9kYXRhJylcbmV4cG9ydHMuY29tcCA9IHJlcXVpcmUoJy4vY29tcCcpXG5cbi8vIFRoZSBJRCBtb25hZCBpcyBhdCB0aGUgYm90dG9tIG9mIGVhY2ggbW9uYWQgc3RhY2tcbmNvbnN0IGlkID0ge1xuICBvZjogZnVuY3Rpb24gKHZhbCkge1xuICAgIHJldHVybiB2YWxcbiAgfSxcbiAgbWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XG4gICAgcmV0dXJuIGZ1bmsodmFsKVxuICB9LFxuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XG4gICAgcmV0dXJuIGZ1bmsodmFsKVxuICB9XG59XG5cbmV4cG9ydHMubWFrZSA9IGZ1bmN0aW9uIG1ha2VfbW9uYWQgKG0xLCBtMikge1xuICBtMS5pbm5lciA9IG0yXG4gIG0yLmlubmVyID0gaWRcbiAgdmFyIHByb3RvID0ge1xuICAgIG1hcDogZnVuY3Rpb24gKGZ1bmspIHtcbiAgICAgIHJldHVybiBjcmVhdGUobTIubWFwKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIG0xLm1hcChmdW5rLCB2YWwpXG4gICAgICB9LCB0aGlzLl92YWx1ZSkpXG4gICAgfSxcbiAgICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaykge1xuICAgICAgdmFyIGZ1bmtrID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gZnVuayh2YWwpLl92YWx1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNyZWF0ZShtMS5mbGF0TWFwKGZ1bmtrLCB0aGlzLl92YWx1ZSwgbTIpKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZSAodmFsdWUpIHtcbiAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShwcm90bylcbiAgICBvYmouX3ZhbHVlID0gdmFsdWVcbiAgICByZXR1cm4gb2JqXG4gIH1cblxuICBmdW5jdGlvbiBtYWtlICh2YWx1ZSkge1xuICAgIHJldHVybiBjcmVhdGUobTIub2YobTEub2YodmFsdWUpKSlcbiAgfVxuXG4gIG1ha2UucHJvdG90eXBlID0gcHJvdG9cbiAgcmV0dXJuIG1ha2Vcbn1cblxuZXhwb3J0cy5wcmludCA9IGZ1bmN0aW9uIHByaW50ICh2YWwpIHtjb25zb2xlLmxvZyh2YWwpO3JldHVybiB2YWx9XG4iLCJleHBvcnRzLmxpc3QgPSB7XG4gIG5hbWU6ICdsaXN0JyxcbiAgb2Y6IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHZhbC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyB2YWwgOiBbdmFsXSB9LFxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcbiAgICByZXR1cm4gdmFsLm1hcChmdW5rKVxuICB9LFxuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsLCBpbm5lck1vbmFkKSB7XG4gICAgcmV0dXJuIHZhbC5yZWR1Y2UoZnVuY3Rpb24gKGxpc3QsIHZhbCkge1xuICAgICAgcmV0dXJuIGlubmVyTW9uYWQuZnVuayh2YWwpXG4gICAgfSwgW10pXG4gIH0sXG5cbiAgZmxhdDogZnVuY3Rpb24gKHZhbCwgaW5uZXJNb25hZCkge1xuICAgIHJldHVybiB2YWwucmVkdWNlKGZ1bmN0aW9uIChsaXN0LCBpKSB7XG4gICAgICB2YXIgaW5kZXggPSAtMVxuICAgICAgdmFyIG92ZXIgPSBmYWxzZVxuICAgICAgd2hpbGUgKCFvdmVyKSB7XG4gICAgICAgIGxpc3QucHVzaChpbm5lck1vbmFkLm1hcChmdW5jdGlvbiAoaW5uZXJMaXN0KSB7XG4gICAgICAgICAgaW5kZXgrK1xuICAgICAgICAgIGlmIChpbmRleCAtIDEgPT09IGlubmVyTGlzdC5sZW5ndGgpIHtvdmVyID0gdHJ1ZX1cbiAgICAgICAgICByZXR1cm4gaW5uZXJMaXN0W2luZGV4XVxuICAgICAgICB9LCBpKSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBsaXN0XG4gICAgfSwgW10pXG4gIH1cblxufVxuIl19
