(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";exports.promise={name:"promise",of:function(n){return function(t){return t(n)}},map:function(n,t){return function(u){t(function(t){return u(n(t))})}},flat:function(n,t){return function(u){n(function(n){t.map(function(r){r(function(r){u(t.map(function(){return r},n))})},n)})}}};

},{}],2:[function(require,module,exports){
"use strict";exports.id={name:"id",of:function(a){return{idVal:a}},map:function(a,n){return{idVal:a(n.idVal)}},flatMap:function(a,n,e){return e.flatMap(function(n){return a(n.idVal)},n,e.inner)}},exports.maybe={name:"maybe",of:function(a){return{maybeVal:a}},map:function(a,n){return{maybeVal:void 0===n.maybeVal?n.maybeVal:a(n.maybeVal)}},flatMap:function(a,n,e){return e.flatMap(function(n){return void 0===n.maybeVal?n.maybeVal:a(n.maybeVal)},n,e.inner)}};

},{}],3:[function(require,module,exports){
"use strict";exports.prim=require("./prim"),exports.data=require("./data"),exports.comp=require("./comp");var id={of:function(r){return r},map:function(r,t){return r(t)},flatMap:function(r,t){return r(t)}};exports.make=function(r,t){function n(r){var t=Object.create(u);return t._value=r,t}function e(e){return n(t.of(r.of(e)))}r.inner=t,t.inner=id;var u={map:function(e){return n(t.map(function(t){return r.map(e,t)},this._value))},flatMap:function(e){var u=function(r){return e(r)._value};return n(r.flatMap(u,this._value,t))}};return e.prototype=u,e},exports.print=function(r){return console.log(r),r};

},{"./comp":1,"./data":2,"./prim":4}],4:[function(require,module,exports){
"use strict";exports.list={name:"list",of:function(n){return n.constructor===Array?n:[n]},map:function(n,r){return r.map(n)},flatMap:function(n,r,t){return r.reduce(function(n,r){return t.funk(r)},[])},flat:function(n,r){return n.reduce(function(n,t){for(var u=-1,e=!1;!e;)n.push(r.map(function(n){return u++,u-1===n.length&&(e=!0),n[u]},t));return n},[])}};

},{}]},{},[1,2,3,4])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjOlxcZ2l0LXByb2plY3RzXFxzb25uZVxcbGliXFxjb21wLmpzIiwiYzpcXGdpdC1wcm9qZWN0c1xcc29ubmVcXGxpYlxcZGF0YS5qcyIsImM6XFxnaXQtcHJvamVjdHNcXHNvbm5lXFxsaWJcXG1haW4uanMiLCJjOlxcZ2l0LXByb2plY3RzXFxzb25uZVxcbGliXFxwcmltLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO1lDQUEsU0FBUSxTQUNOLEtBQU0sVUFDTixHQUFJLFNBQVUsR0FBTSxNQUFPLFVBQVUsR0FBVyxNQUFPLEdBQVEsS0FDL0QsSUFBSyxTQUFVLEVBQU0sR0FDbkIsTUFBTyxVQUFVLEdBQ2YsRUFBSSxTQUFVLEdBQ1osTUFBTyxHQUFRLEVBQUssUUFLMUIsS0FBTSxTQUFVLEVBQUssR0FDbkIsTUFBTyxVQUFVLEdBQ2YsRUFBSSxTQUFVLEdBQ1osRUFBVyxJQUFJLFNBQVUsR0FDdkIsRUFBYSxTQUFVLEdBQ3JCLEVBQVEsRUFBVyxJQUFJLFdBQWEsTUFBTyxJQUFRLE9BRXBEOztBQWxCWCxPQUFPLENBQUMsT0FBTyxHQUFHO0FBQ2hCLE1BQUksRUFBRSxJQ0RSLEtEQ2lCLElDRFQsSUFDTixLQUFNLEtBQ04sR0FBSSxTQUFVLEdBQU8sT0FBUSxNQUFPLElBQ3BDLElBQUssU0FBVSxFQUFNLEdBQ25CLE9BQ0UsTUFBTyxFQUFLLEVBQUksU0FHcEIsUUFBUyxTQUFVLEVBQU0sRUFBSyxHQUM1QixNQUFPLEdBQVcsUUFBUSxTQUFVLEdBQ2xDLE1BQU8sR0FBSyxFQUFRLFFBQ25CLEVBQUssRUFBVyxTQUl2QixRQUFRLE9BQ04sS0FBTSxRQUNOLEdBQUksU0FBVSxHQUFPLE9BQVEsU0FBVSxJQUN2QyxJQUFLLFNBQVUsRUFBTSxHQUNuQixPQUNBLFNBQTJCLFNB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REEsQ0RDQyxBQ0RBLEtEQ0ssQ0FBQyxDQUFDLENBQUE7QUVEbkMsQUNIRSxJREdFLEFDSEEsQ0ZJQyxDQUFBLEFDREMsQUNIQSxDSEtDLENBQUMsQ0FBQSxBRUZDLFNDSE8sR0FBRyxFQUFFO0FESW5CLEFDSnFCLEdGS3BCLENDREMsQ0ZFQyxDQUFBLEFFRkMsS0NKd0IsR0FBRyxDQUFDLEdESWxCLEdBQUcsRUFBRSxHQ0p3QixLQUFLLEtBQUssR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtBRk1uRSxBQ0RFLEdGRUQsQUdQb0UsTUZNOUQsRUFBRSxBQ0RBLEdBQUcsQ0FBQSxhRENPLElBQUksRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFO0FBQ3hDLEFFTkYsR0RLQyxFQ0xFLEVBQUUsSUZNSSxTRU5NLENGTUksQ0FBQyxFRU5ELEVBQUUsR0ZNTSxBRU5ILENGTUksQ0VORixTRk1ZLE9BQU8sRUFBRTtBREUvQyxBQ0RJLEFDREosQUNMRSxLREtDLENGRUMsQ0VGQyxDRkVDLEdHUEcsRUZNRSxDRU5DLENBQUMsRUZNRSxDQUFDLEFFTkEsQ0FBQyxDREtGLEVGRUMsQ0dQSyxDREtGLEFDTEcsQ0hPSCxBQ0RJLEFFTkQsQ0ZNRSxBQ0RILENGRUEsRUVGRyxFRENLLEFDREgsQ0RDSSxDQUFBLElEQ0MsRUFBRTtBQUMvQixBRUZBLEdDTEQsRUZNRSxFQUFFLEdBQUcsQ0RDQyxBRUZBLENEQ0MsR0NERyxDQUFDLEdBQUcsQ0FBQyxDRkVDLEFFRkQsQ0RDRSxDQUFDLEtEQ0ssQUNEQSxDQUFDLENEQ0MsQUNERDtBREV2QixBR1BKLEdGTUMsQUNEQSxNRkVNLEFHUEEsQ0hPQyxDR1BDLFNIT1MsQ0FBQyxFQUFFLEtHUEYsSUFBSSxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUhRcEMsQUVGTixBQ0xFLENGTUgsQ0FBQSxPQ0RRLEVBQUUsQUNMQSxHQUFHLENBQUMsR0hPRyxDQUFDLEVHUEUsQ0hPQyxBR1BBLENIT0MsS0VGRixJQUFJLEFDTE8sQ0hPQyxDRUZOLEVDTFMsQ0RLTixDQ0xRLENES04sRUNMUyxFQUFFLEVIT0UsRUFBRTtBQUNyQyxBRUZOLEFDTEUsV0RLSyxFQ0xFLEVES0UsQ0FBQyxHQUFHLENBQUMsQ0FBQSxDRkVFLENBQUMsQUdQQSxDQUFDLElBQUksQ0FBQyxHQUFHLENIT0MsQUdQQSxDQUFBLElIT0ssRUFBRTtBQUM1QixBQ0RaLEdDREcsRUNMRSxFRk1FLEFFTkEsQ0ZNQyxDRU5DLENBQUMsQ0FBQSxFRk1HLEdBQUcsR0RDRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsWUFBWTtBQUFDLEFDQTlDLENDREQsQ0FBQSxDQ0xFLEdGTUcsRUFBRSxPQUFPLE1EQXdDLEtBQUssQ0FBQTtBQ0MxRCxJQUFFLEVBQUUsT0REdUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxBQ0NsRCxDRERrRCxFQ0MvQyxFQUFFO0FBQUUsQUNBdkIsQUNMRSxNQUFJLENES0MsQ0FBQyxBQ0xBLEdIS0csQUNBbUIsQ0RBbEIsQUVBQSxDRkFBLEFDQW1CLEVDQWhCLE1EQXdCLENFTHJCLENGS3VCLENDQWpCLENDTEgsQ0ZLdUIsQ0VMckIsQ0ZLdUIsQ0FBQSxLQ0FaLENBQUUsRUFBRSxBQ0xMLEVES08sQUNMTCxFREtPLEVBQUU7QUFDMUMsQUNMRSxHRkk0QyxDQ0M1QyxDQUFDLElGQUksQ0VBQyxDRkFDLEFHTEEsQ0hLQyxDQUFDLEFFQUEsQ0ZBQSxBR0xDLENES0MsQUNMQSxDREtBLEtDTE0sQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDLEVBQUU7QUZLdkMsQUNDQSxBQ0xJLElES0YsQ0REQyxBQ0NBLEVGQ0UsQUNGQSxDREVDLENBQUEsQ0VERSxBQ0xBLEdES0csRUFBRSxBQ0xBLENES0EsRUNMRyxDQUFDLENGSUYsQUVKRyxDQUFBLEdGSUMsRUFBRSxHQUFHLEVBQUU7QUFDeEIsQUNDRixBQ0xJLEtITUQsQ0FBQSxBRURDLElDTEksQ0ZJQyxBQ0NBLEdBQUcsQUNMQSxHQUFHLEtBQUssQ0FBQTtBRktsQixBQ0NBLEFDTEUsR0hNSCxJRURJLEVBQUUsSUNMSSxDRklELEFFSkUsRUZJQSxFRUpJLENGSUQsQ0FBQyxBRUpFLEVES0QsSUFBSSxFRERHLEFDQ0QsS0RETSxTQUFTLEdBQUcsR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQ0V0RSxBQ0xFLENITVAsQ0FBQSxHQ0ZJLENBQUEsTUVKTyxDREtDLEFDTEEsSUFBSSxDQUFDLENES0MsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENDTEMsQ0FBQyxHQUFHLENBQUMsSURLSSxHQUFHLEVBQUUsQ0NMQyxTQUFTLEVBQUU7QURNOUMsQUNMRSxHRklQLFlDQ1ksQUNMQSxFREtFLEFDTEEsQ0RLQyxBQ0xELEdES0ksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUE7QURBOUIsQUVKUSxPREtILEVEREUsQUNDQSxFRERFLEVDQ0UsQ0FBQyxBQ0xBLEtBQUssQ0RLQyxDQUFDLENBQUMsQUNMQSxDREtBLEFDTEMsS0ZJRixBRUpPLElGSUgsRUFBRSxHQUFHLEFFSk8sQ0FBQyxDRklOLEtFSlksRUFBRSxHRklKLEVBQUU7QUFDeEMsQUVMMkMsS0RNMUMsTURETSxLRUx3QyxHQUFHLEVGS2pDLENBQUMsQ0VMb0MsQ0FBQSxLRks3QixDQUFDLFVBQVUsVUFBVSxFQUFFO0FBQzlDLEFDQ0YsV0FBTyxBQ1BnRCxFRk05QyxBQ0NBLFVERFUsQ0FBQyxNQ0NELEVERFMsRUNDTCxFQUFFLENERFEsU0FBUyxHQUFHLFVBQVUsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtBQ0UxRixBQ1BJLEtGTUwsRUFBRSxHQUFHLEFDQ0EsRURERSxHQ0NHLEVDUEUsQ0RPQyxJRERJLENBQUMsR0VORyxDRE9oQixBQ1BpQixDRk1DLENBQUMsQ0FBQSxFQ0NkLEFDUGlCLENET0osQUNQSyxDQUFBLEVET0YsRUFBRTtBQUN6QixHRERMLE1FTk0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDRE9DLEFDUEQsSURPSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQTtDREE5QixDQUFBLEtDQ00sQUNQQSxDRE9BO0FBQ0QsQUNQQSxhRE9PLEFDUEEsSUFBSSxDQUFBLENET0UsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUE7S0FDbEQsQUNQQSxFQUFFLEVBQUUsQ0FBQyxDQUFBO0dEUVAsQUNQQSxDRE9BO0FBQ0QsV0FBUyxNQUFNLENBQUUsS0FBSyxFQUFFO0FBQ3RCLENDUEgsQ0FBQSxNRE9PLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzlCLE9BQUcsQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFBO0FBQ2xCLFdBQU8sR0FBRyxDQUFBO0dBQ1g7O0FBRUQsV0FBUyxJQUFJLENBQUUsS0FBSyxFQUFFO0FBQ3BCLFdBQU8sTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7R0FDbkM7QUFDRCxNQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQTtBQUN0QixTQUFPLElBQUksQ0FBQTtDQUNaLENBQUE7O0FBRUQsT0FBTyxDQUFDLEtBQUssR0FBRyxTQUFTLEtBQUssQ0FBRSxHQUFHLEVBQUU7QUFBQyxTQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFBO0NBQUMsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJleHBvcnRzLnByb21pc2UgPSB7XHJcbiAgbmFtZTogJ3Byb21pc2UnLFxyXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7cmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJldHVybiByZXNvbHZlKHZhbCl9IH0sXHJcbiAgbWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgdmFsKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiByZXNvbHZlKGZ1bmsodmFsdWUpKVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGZsYXQ6IGZ1bmN0aW9uICh2YWwsIGlubmVyTW9uYWQpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICB2YWwoZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICBpbm5lck1vbmFkLm1hcChmdW5jdGlvbiAoaW5uZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICBpbm5lclByb21pc2UoZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoaW5uZXJNb25hZC5tYXAoZnVuY3Rpb24gKCkge3JldHVybiB2YWx1ZX0sIGkpKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9LCBpKVxyXG5cclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0cy5pZCA9IHtcclxuICBuYW1lOiAnaWQnLFxyXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB7aWRWYWw6IHZhbCB9IH0sXHJcbiAgbWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZFZhbDogZnVuayh2YWwuaWRWYWwpXHJcbiAgICB9XHJcbiAgfSxcclxuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsLCBpbm5lck1vbmFkKSB7XHJcbiAgICByZXR1cm4gaW5uZXJNb25hZC5mbGF0TWFwKGZ1bmN0aW9uIChpbm5lcklkKSB7XHJcbiAgICAgIHJldHVybiBmdW5rKGlubmVySWQuaWRWYWwpXHJcbiAgICB9LCB2YWwsIGlubmVyTW9uYWQuaW5uZXIpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnRzLm1heWJlID0ge1xyXG4gIG5hbWU6ICdtYXliZScsXHJcbiAgb2Y6IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHttYXliZVZhbDogdmFsIH0gfSxcclxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICBtYXliZVZhbDogdmFsLm1heWJlVmFsID09PSB1bmRlZmluZWQgPyB2YWwubWF5YmVWYWwgOiBmdW5rKHZhbC5tYXliZVZhbClcclxuICAgIH1cclxuICB9LFxyXG4gIGZsYXRNYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwsIGlubmVyTW9uYWQpIHtcclxuICAgIHJldHVybiBpbm5lck1vbmFkLmZsYXRNYXAoZnVuY3Rpb24gKGlubmVyTWF5YmUpIHtcclxuICAgICAgcmV0dXJuIGlubmVyTWF5YmUubWF5YmVWYWwgPT09IHVuZGVmaW5lZCA/IGlubmVyTWF5YmUubWF5YmVWYWwgOiBmdW5rKGlubmVyTWF5YmUubWF5YmVWYWwpXHJcbiAgICB9LCB2YWwsIGlubmVyTW9uYWQuaW5uZXIpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydHMucHJpbSA9IHJlcXVpcmUoJy4vcHJpbScpXHJcbmV4cG9ydHMuZGF0YSA9IHJlcXVpcmUoJy4vZGF0YScpXHJcbmV4cG9ydHMuY29tcCA9IHJlcXVpcmUoJy4vY29tcCcpXHJcblxyXG4vLyBUaGUgSUQgbW9uYWQgaXMgYXQgdGhlIGJvdHRvbSBvZiBlYWNoIG1vbmFkIHN0YWNrXHJcbnZhciBpZCA9IHtcclxuICBvZjogZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgcmV0dXJuIHZhbFxyXG4gIH0sXHJcbiAgbWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XHJcbiAgICByZXR1cm4gZnVuayh2YWwpXHJcbiAgfSxcclxuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XHJcbiAgICByZXR1cm4gZnVuayh2YWwpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnRzLm1ha2UgPSBmdW5jdGlvbiBtYWtlX21vbmFkIChtMSwgbTIpIHtcclxuICBtMS5pbm5lciA9IG0yXHJcbiAgbTIuaW5uZXIgPSBpZFxyXG4gIHZhciBwcm90byA9IHtcclxuICAgIG1hcDogZnVuY3Rpb24gKGZ1bmspIHtcclxuICAgICAgcmV0dXJuIGNyZWF0ZShtMi5tYXAoZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIHJldHVybiBtMS5tYXAoZnVuaywgdmFsKVxyXG4gICAgICB9LCB0aGlzLl92YWx1ZSkpXHJcbiAgICB9LFxyXG4gICAgZmxhdE1hcDogZnVuY3Rpb24gKGZ1bmspIHtcclxuICAgICAgdmFyIGZ1bmtrID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIHJldHVybiBmdW5rKHZhbCkuX3ZhbHVlXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGNyZWF0ZShtMS5mbGF0TWFwKGZ1bmtrLCB0aGlzLl92YWx1ZSwgbTIpKVxyXG4gICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiBjcmVhdGUgKHZhbHVlKSB7XHJcbiAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShwcm90bylcclxuICAgIG9iai5fdmFsdWUgPSB2YWx1ZVxyXG4gICAgcmV0dXJuIG9ialxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbWFrZSAodmFsdWUpIHtcclxuICAgIHJldHVybiBjcmVhdGUobTIub2YobTEub2YodmFsdWUpKSlcclxuICB9XHJcbiAgbWFrZS5wcm90b3R5cGUgPSBwcm90b1xyXG4gIHJldHVybiBtYWtlXHJcbn1cclxuXHJcbmV4cG9ydHMucHJpbnQgPSBmdW5jdGlvbiBwcmludCAodmFsKSB7Y29uc29sZS5sb2codmFsKTtyZXR1cm4gdmFsfVxyXG4iLCJleHBvcnRzLmxpc3QgPSB7XHJcbiAgbmFtZTogJ2xpc3QnLFxyXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB2YWwuY29uc3RydWN0b3IgPT09IEFycmF5ID8gdmFsIDogW3ZhbF0gfSxcclxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcclxuICAgIHJldHVybiB2YWwubWFwKGZ1bmspXHJcbiAgfSxcclxuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsLCBpbm5lck1vbmFkKSB7XHJcbiAgICByZXR1cm4gdmFsLnJlZHVjZShmdW5jdGlvbiAobGlzdCwgdmFsKSB7XHJcbiAgICAgIHJldHVybiBpbm5lck1vbmFkLmZ1bmsodmFsKVxyXG4gICAgfSwgW10pXHJcbiAgfSxcclxuXHJcbiAgZmxhdDogZnVuY3Rpb24gKHZhbCwgaW5uZXJNb25hZCkge1xyXG4gICAgcmV0dXJuIHZhbC5yZWR1Y2UoZnVuY3Rpb24gKGxpc3QsIGkpIHtcclxuICAgICAgdmFyIGluZGV4ID0gLTFcclxuICAgICAgdmFyIG92ZXIgPSBmYWxzZVxyXG4gICAgICB3aGlsZSAoIW92ZXIpIHtcclxuICAgICAgICBsaXN0LnB1c2goaW5uZXJNb25hZC5tYXAoZnVuY3Rpb24gKGlubmVyTGlzdCkge1xyXG4gICAgICAgICAgaW5kZXgrK1xyXG4gICAgICAgICAgaWYgKGluZGV4IC0gMSA9PT0gaW5uZXJMaXN0Lmxlbmd0aCkge292ZXIgPSB0cnVlfVxyXG4gICAgICAgICAgcmV0dXJuIGlubmVyTGlzdFtpbmRleF1cclxuICAgICAgICB9LCBpKSlcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbGlzdFxyXG4gICAgfSwgW10pXHJcbiAgfVxyXG5cclxufVxyXG4iXX0=
