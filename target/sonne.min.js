(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";exports.promise={name:"promise",of:function(n){return function(t){return t(n)}},map:function(n,t){return function(u){t(function(t){return u(n(t))})}},flat:function(n,t){return function(u){n(function(n){t.map(function(r){r(function(r){u(t.map(function(){return r},n))})},n)})}}};

},{}],2:[function(require,module,exports){
"use strict";exports.prim=require("./prim"),exports.data=require("./data"),exports.comp=require("./comp");var id={flatMap:function(r,t){return r(t)}};exports.make=function(r,t){function e(r){var t=Object.create(u);return t._value=r,t}function n(n){return e(t.of(r.of(n)))}r.inner=t,t.inner=id;var u={map:function(n){return e(t.map(function(t){return r.map(n,t)},this._value))},flatMap:function(n){var u=function(r){return n(r)._value};return e(r.flatMap(u,this._value,t))}};return n.prototype=u,n},exports.print=function(r){return console.log(r),r};

},{"./comp":1,"./data":3,"./prim":4}],3:[function(require,module,exports){
"use strict";exports.id={name:"id",of:function(a){return{idVal:a}},map:function(a,n){return{idVal:a(n.idVal)}},flatMap:function(a,n,e){return e.flatMap(function(n){return a(n.idVal)},n,e.inner)}},exports.maybe={name:"maybe",of:function(a){return{maybeVal:a}},map:function(a,n){return{maybeVal:void 0===n.maybeVal?n.maybeVal:a(n.maybeVal)}},flatMap:function(a,n,e){return e.flatMap(function(n){return void 0===n.maybeVal?n.maybeVal:a(n.maybeVal)},n,e.inner)}};

},{}],4:[function(require,module,exports){
"use strict";exports.list={name:"list",of:function(n){return n.constructor===Array?n:[n]},map:function(n,r){return r.map(n)},flatMap:function(n,r,t){return r.reduce(function(n,r){return t.funk(r)},[])},flat:function(n,r){return n.reduce(function(n,t){for(var u=-1,e=!1;!e;)n.push(r.map(function(n){return u++,u-1===n.length&&(e=!0),n[u]},t));return n},[])}};

},{}]},{},[1,2,3,4])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvYm9yaXNtYXJpbm92L3Nvbm5lL2xpYi9jb21wLmpzIiwiL1VzZXJzL2JvcmlzbWFyaW5vdi9zb25uZS9saWIvY29yZS5qcyIsIi9Vc2Vycy9ib3Jpc21hcmlub3Yvc29ubmUvbGliL2RhdGEuanMiLCIvVXNlcnMvYm9yaXNtYXJpbm92L3Nvbm5lL2xpYi9wcmltLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO1lDQUEsU0FBUSxTQUNOLEtBQU0sVUFDTixHQUFJLFNBQVUsR0FBTSxNQUFPLFVBQVUsR0FBVyxNQUFPLEdBQVEsS0FDL0QsSUFBSyxTQUFVLEVBQU0sR0FDbkIsTUFBTyxVQUFVLEdBQ2YsRUFBSSxTQUFVLEdBQ1osTUFBTyxHQUFRLEVBQUssUUFLMUIsS0FBTSxTQUFVLEVBQUssR0FDbkIsTUFBTyxVQUFVLEdBQ2YsRUFBSSxTQUFVLEdBQ1osRUFBVyxJQUFJLFNBQVUsR0FDdkIsRUFBYSxTQUFVLEdBQ3JCLEVBQVEsRUFBVyxJQUFJLFdBQWEsTUFBTyxJQUFRLE9BRXBEOztBQWxCWCxPQUFPLENBQUMsT0FBTyxHQUFHO0FBQ2hCLE1BQUksRUFBRSxJQ0RSLEtEQ2lCLElDRFQsS0FBTyxRQUFRLFVBQ3ZCLFFBQVEsS0FBTyxRQUFRLFVBQ3ZCLFFBQVEsS0FBTyxRQUFRLFNBRXZCLElBQUksS0FDRixRQUFTLFNBQVUsRUFBTSxHQUN2QixNQUFPLEdBQUssSUFLaEIsU0FBUSxLQUFPLFNBQXFCLEVBQUksR0FnQnRDLFFBQVMsR0FBUSxHQUNmLEdBQUksR0FBTSxPQUFPLE9BQU8sRUFFeEIsT0FEQSxHQUFJLE9BQVMsRUFDTixFQUdULFFBQVMsR0FBTSxHQUNiLE1BQU8sR0FBTyxFQUFHLEdBQUcsRUFBRyxHQUFHLEtBdEI1QixFQUFHLE1BQVEsRUFDWCxF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LElBQUUsQ0RDQyxDQ0RDLENIS0MsQUVKQSxDRklDLENBQUEsU0dMUSxFRENDLENDREUsRUFBRSxDRENBLEVBQUUsR0FBRyxFQUFFO0FBQ3hCLEFDRm1CLENGT3RCLENBQUEsR0RESSxDQUFBLEtFSk0sQUNGbUIsR0FBRyxDQUFDLFdBQVcsS0FBSyxLQUFLLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7QURHL0QsR0ZJSCxBR1BvRSxRREc1RCxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO0FETTVCLEFFUkUsS0RHRyxBQ0hBLENER0EsQ0RLRSxBRVJBLENGUUMsSUFBSSxHQUFHLEtFUkUsSUZRTyxBRVJILEVBQUUsR0FBRyxFQUFFLEdGUU0sQ0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO0FEQTFDLEFDQ0EsQUVSRSxHREdELENES0MsQ0FBQyxDRERDLEVBQUUsRUNDRSxDRVJDLEVGUUUsQ0VSQyxDRlFDLEFFUkEsQ0ZRQSxFRVJHLENBQUMsR0hPRCxDR1BLLENBQUMsQ0hPSCxBR1BHLEVIT0QsVUFBVSxFQUFFO0FBQy9CLEFDQ0YsQUNMQSxHQ0hDLENGUUMsQ0FBQyxJQ0xJLENES0MsQ0REQyxBRUpBLEVES0UsRUFBRSxDQUFBLEtERE0sT0FBTyxBRUpQLEVGSVMsRUVKTCxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUZLdEMsQUNDSixBQ0xFLEFDSEYsTUZRSSxHRERHLEFHUEEsQ0hPQyxDQ0NDLEFDTEEsQUNIQSxHRlFHLE1ERE0sQ0FBQyxBRUpBLENBQUMsQ0ZJQyxLR1BGLENER1EsQ0FBQyxFQ0hMLEVBQUUsR0FBRyxFQUFFLENER1EsT0FBTyxFQUFFLEFDSFAsRUFBRTtBSFFwQyxBQ0NKLEFDTEUsQUNIRixPRlFHLEVBQUUsRUVSRSxFREdFLENDSEMsQ0FBQyxFREdFLENGSUMsQUVKQSxDRklDLEVHUEUsQ0hPQyxBQ0NILEFFUkcsQ0hPQyxFRUpFLENES0YsQUNMRyxFREtELEdDTE0sQ0FBQyxBQ0hBLENIT0MsQUVKRCxHQ0hJLEVBQUUsR0FBRyxFQUFFLEVIT0UsRUFBRTtBQUNyQyxBQ0NKLEFFUkEsS0RHRCxFQUFFLEdBQUcsRUFBRSxDREtDLEFFUkEsTUZRTSxDQUFDLEVEREUsQUNDQSxBQ0xBLENGSUMsQUNDQSxBQ0xBLEFDSEEsQ0FBQyxFRlFFLENBQUMsQ0NMQyxBQ0hBLENER0MsQUNIQSxDREdBLEVDSEcsQ0hPQyxBR1BBLENBQUEsR0ZRSSxDRERDLEVBQUUsQUNDQSxFQUFFO0FEQTlCLEFDQ0osR0NMTCxFQ0hFLEVBQUUsRUFBRSxDQUFDLENBQUEsSUZRSyxFQUFFLENBQUMsQ0REQyxDQUFDLENDQ0MsQ0FBQyxJQUFJLEVBQUUsRURERSxDQUFDLEFDQ0EsQ0FBQyxDQUFBLENEREUsQ0FBQyxZQUFZO0FBQUMsQ0VIL0MsQ0FBQSxDQ0hFLElGUUksRUFBRSxJQUFJLENBQUMsTUFBTSxDREZtQyxBQ0VsQyxDQUFDLENBQUEsR0RGc0MsQ0FBQTtLQ0d2RCxRREh3RCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7QUNJOUQsQUNMSixBQ0hFLE1BQUksQ0RHQyxDQUFDLEFDSEEsR0hLRyxBQ0dBLENESEMsQ0FBQSxBQ0dDLEFDTEEsR0FBRyxNQ0hFLEdBQUcsRUFBRSxHRlFBLElBQUksRUFBRSxDRVJJLEVBQUU7QUZTN0IsQUNMSixBQ0hFLE1ER0UsRUFBRSxDRkVDLENDR0MsQ0RIQyxBR0xBLENIS0MsQ0FBQyxDQUFBLEFHTEMsQ0ZRQyxBQ0xBLEFDSEEsR0ZRRyxHRVJHLENBQUMsS0ZRWixLQUFLLEFFUmlCLENGUUosR0FBRyxBRVJLLEVGUUgsQUVSSyxDQUFDLEVBQUU7QUZTakMsQUNMTixBQ0hJLElER0YsRUFBRSxDRkdDLENBQUMsQ0FBQSxDR05FLEtGUUssQUVSQSxHREdDLEFDSEUsQ0ZRQyxBRVJBLENGUUMsQUVSQSxDREdELEFDSEMsRUZRRyxBQ0xGLENES0csQ0FBQyxNQUFNLENBQUE7QUNMUixBQ0ZqQixLSE1ELENBQUEsQ0NFRSxDQUFBLEVFUkcsQ0RFb0IsRUFBQyxDQ0ZqQixHQUFHLElERXNCLENDRmpCLENERW1CLEFDRm5CLEdERXNCLEVBQUUsQ0FBQTtBRE94QyxBRVJBLEdITUgsQUVMNkMsVURPbkMsQUVSQSxDQUFDLElBQUksQ0ZRQyxDQUFDLEFFUkEsRUZRRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO0FDTnJELEFDRE0sQ0hNUCxDQUFBLEdDRUksQUNQQSxFQUFFLEtDREssQ0FBQyxJQUFJLENBQUMsRURDRCxJQUFJLEVBQUUsRUNESyxDRENGLEFDREcsRURDRCxDQ0RJLENBQUMsVUFBVSxTQUFTLEVBQUU7QURFbEQsQUNETSxHRlFQLENBQUEsT0NQUSxJQ0RJLEVBQUUsQ0FBQTtBRlNmLEFDUEUsQUNETSxXRlFDLEdDUEMsQUNERSxFRENBLENET0csQ0FBRSxDQ1BGLEFDREUsQ0RDRCxFQ0RJLENGUUUsQUVSRCxFRlFHLEdDUEEsQUNERSxLRENHLElDRE0sQ0FBQyxJRENFLEVDREksQ0RDRCxDQ0RHLEVEQ0EsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7QURReEUsQUVUMkMsS0RFMUMsQ0FBQSxFRE9HLEdBQUcsR0FBRyxFRVRxQyxHQUFHLENGU2xDLENBQUMsRUVUcUMsQ0FBQSxHRlMvQixDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzlCLEdDUEQsSURPSSxDQUFDLEdFVm1ELEdGVTdDLEdBQUcsS0FBSyxDQUFBO0FBQ2xCLEFDUEYsQUNIUSxTREdELEVET0UsQUNQQSxHRE9HLENBQUEsRUVWRyxTQUFTLENBQUMsQ0RHTixJQUFJLEFDSE8sQ0FBQyxDREdOLEFDSE0sR0RHSCxFQUFFLFVBQVUsRUFBRTtBQUN4QyxHRE9ELE1FVk0sRURHRSxBQ0hBLENBQUMsQ0FBQyxDQUFDLENBQUEsTURHTyxDQUFDLE9BQU8sQ0FBQyxVQUFVLFVBQVUsRUFBRTtBQUM5QyxPQ0hDLE1ER00sVUFBVSxDQUFDLFFBQVEsS0FBSyxTQUFTLEdBQUcsVUFBVSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0FEUTlGLEFFVkksS0RHRCxFQUFFLEdBQUcsQ0RPQyxDQ1BDLENDSEMsRUZVRSxDQUFFLENFVkEsQ0FBQSxHRlVLLENDUEEsQ0RPRSxBQ1BELEtBQUssQ0FBQyxDQUFBO0FEUXpCLEdDUEQsRUNIRSxFQUFFLEVBQUUsQ0FBQyxDRlVDLEFFVkQsTUZVTyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0NOckMsQ0FBQSxDRE9FLEFFVkE7QUZXRCxNQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQTtBQUN0QixDRVZELENBQUEsT0ZVUSxJQUFJLENBQUE7Q0FDWixDQUFBOztBQUVELE9BQU8sQ0FBQyxLQUFLLEdBQUcsU0FBUyxLQUFLLENBQUUsR0FBRyxFQUFFO0FBQUMsU0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQTtDQUFDLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0cy5wcm9taXNlID0ge1xuICBuYW1lOiAncHJvbWlzZScsXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7cmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJldHVybiByZXNvbHZlKHZhbCl9IH0sXG4gIG1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgdmFsKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShmdW5rKHZhbHVlKSlcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuXG4gIGZsYXQ6IGZ1bmN0aW9uICh2YWwsIGlubmVyTW9uYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIHZhbChmdW5jdGlvbiAoaSkge1xuICAgICAgICBpbm5lck1vbmFkLm1hcChmdW5jdGlvbiAoaW5uZXJQcm9taXNlKSB7XG4gICAgICAgICAgaW5uZXJQcm9taXNlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmVzb2x2ZShpbm5lck1vbmFkLm1hcChmdW5jdGlvbiAoKSB7cmV0dXJuIHZhbHVlfSwgaSkpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSwgaSlcblxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydHMucHJpbSA9IHJlcXVpcmUoJy4vcHJpbScpXG5leHBvcnRzLmRhdGEgPSByZXF1aXJlKCcuL2RhdGEnKVxuZXhwb3J0cy5jb21wID0gcmVxdWlyZSgnLi9jb21wJylcblxudmFyIGlkID0ge1xuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XG4gICAgcmV0dXJuIGZ1bmsodmFsKVxuICB9XG5cbn1cblxuZXhwb3J0cy5tYWtlID0gZnVuY3Rpb24gbWFrZV9tb25hZCAobTEsIG0yKSB7XG4gIG0xLmlubmVyID0gbTIgLy8gbWF5YmVcbiAgbTIuaW5uZXIgPSBpZFxuICB2YXIgcHJvdG8gPSB7XG4gICAgbWFwOiBmdW5jdGlvbiAoZnVuaykge1xuICAgICAgcmV0dXJuIGNyZWF0ZShtMi5tYXAoZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gbTEubWFwKGZ1bmssIHZhbClcbiAgICAgIH0sIHRoaXMuX3ZhbHVlKSlcbiAgICB9LFxuICAgIGZsYXRNYXA6IGZ1bmN0aW9uIChmdW5rKSB7XG4gICAgICB2YXIgZnVua2sgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBmdW5rKHZhbCkuX3ZhbHVlXG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlKG0xLmZsYXRNYXAoZnVua2ssIHRoaXMuX3ZhbHVlLCBtMikpXG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZSAodmFsdWUpIHtcbiAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShwcm90bylcbiAgICBvYmouX3ZhbHVlID0gdmFsdWVcbiAgICByZXR1cm4gb2JqXG4gIH1cblxuICBmdW5jdGlvbiBtYWtlICh2YWx1ZSkge1xuICAgIHJldHVybiBjcmVhdGUobTIub2YobTEub2YodmFsdWUpKSlcbiAgfVxuICBtYWtlLnByb3RvdHlwZSA9IHByb3RvXG4gIHJldHVybiBtYWtlXG59XG5cbmV4cG9ydHMucHJpbnQgPSBmdW5jdGlvbiBwcmludCAodmFsKSB7Y29uc29sZS5sb2codmFsKTtyZXR1cm4gdmFsfVxuIiwiZXhwb3J0cy5pZCA9IHtcbiAgbmFtZTogJ2lkJyxcbiAgb2Y6IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHtpZFZhbDogdmFsIH0gfSxcbiAgbWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkVmFsOiBmdW5rKHZhbC5pZFZhbClcbiAgICB9XG4gIH0sXG4gIGZsYXRNYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwsIGlubmVyTW9uYWQpIHtcbiAgICByZXR1cm4gaW5uZXJNb25hZC5mbGF0TWFwKGZ1bmN0aW9uIChpbm5lcklkKSB7XG4gICAgICByZXR1cm4gZnVuayhpbm5lcklkLmlkVmFsKVxuICAgIH0sIHZhbCwgaW5uZXJNb25hZC5pbm5lcilcbiAgfVxufVxuXG5leHBvcnRzLm1heWJlID0ge1xuICBuYW1lOiAnbWF5YmUnLFxuICBvZjogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4ge21heWJlVmFsOiB2YWwgfSB9LFxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcbiAgICByZXR1cm4ge1xuICAgIG1heWJlVmFsOiB2YWwubWF5YmVWYWwgPT09IHVuZGVmaW5lZCA/IHZhbC5tYXliZVZhbCA6IGZ1bmsodmFsLm1heWJlVmFsKVxuICAgIH1cbiAgfSxcbiAgZmxhdE1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCwgaW5uZXJNb25hZCkge1xuICAgIHJldHVybiBpbm5lck1vbmFkLmZsYXRNYXAoZnVuY3Rpb24gKGlubmVyTWF5YmUpIHtcbiAgICAgIHJldHVybiBpbm5lck1heWJlLm1heWJlVmFsID09PSB1bmRlZmluZWQgPyBpbm5lck1heWJlLm1heWJlVmFsIDogZnVuayhpbm5lck1heWJlLm1heWJlVmFsKVxuICAgIH0sIHZhbCwgaW5uZXJNb25hZC5pbm5lcilcbiAgfVxufVxuIiwiZXhwb3J0cy5saXN0ID0ge1xuICBuYW1lOiAnbGlzdCcsXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB2YWwuY29uc3RydWN0b3IgPT09IEFycmF5ID8gdmFsIDogW3ZhbF0gfSxcbiAgbWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XG4gICAgcmV0dXJuIHZhbC5tYXAoZnVuaylcbiAgfSxcbiAgZmxhdE1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCwgaW5uZXJNb25hZCkge1xuICAgIHJldHVybiB2YWwucmVkdWNlKGZ1bmN0aW9uIChsaXN0LCB2YWwpIHtcbiAgICAgIHJldHVybiBpbm5lck1vbmFkLmZ1bmsodmFsKVxuICAgIH0sIFtdKVxuICB9LFxuXG4gIGZsYXQ6IGZ1bmN0aW9uICh2YWwsIGlubmVyTW9uYWQpIHtcbiAgICByZXR1cm4gdmFsLnJlZHVjZShmdW5jdGlvbiAobGlzdCwgaSkge1xuICAgICAgdmFyIGluZGV4ID0gLTFcbiAgICAgIHZhciBvdmVyID0gZmFsc2VcbiAgICAgIHdoaWxlICghb3Zlcikge1xuICAgICAgICBsaXN0LnB1c2goaW5uZXJNb25hZC5tYXAoZnVuY3Rpb24gKGlubmVyTGlzdCkge1xuICAgICAgICAgIGluZGV4KytcbiAgICAgICAgICBpZiAoaW5kZXggLSAxID09PSBpbm5lckxpc3QubGVuZ3RoKSB7b3ZlciA9IHRydWV9XG4gICAgICAgICAgcmV0dXJuIGlubmVyTGlzdFtpbmRleF1cbiAgICAgICAgfSwgaSkpXG4gICAgICB9XG4gICAgICByZXR1cm4gbGlzdFxuICAgIH0sIFtdKVxuICB9XG5cbn1cbiJdfQ==
