(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

exports.promise = {
  name: 'promise',
  of: function of(val) {
    return function (resolve) {
      return resolve(val);
    };
  },
  map: function map(funk, val) {
    return function (resolve) {
      val(function (value) {
        return resolve(funk(value));
      });
    };
  },

  flat: function flat(val, innerMonad) {
    return function (resolve) {
      val(function (i) {
        innerMonad.map(function (innerPromise) {
          innerPromise(function (value) {
            resolve(innerMonad.map(function () {
              return value;
            }, i));
          });
        }, i);
      });
    };
  }
};

},{}],2:[function(require,module,exports){
'use strict';

exports.prim = require('./prim');
exports.data = require('./data');
exports.comp = require('./comp');

var id = {
  flatMap: function flatMap(funk, val) {
    return funk(val);
  }

};

exports.make = function make_monad(m1, m2) {
  m1.inner = m2;
  m2.inner = id;
  var proto = {
    map: function map(funk) {
      return create(m2.map(function (val) {
        return m1.map(funk, val);
      }, this._value));
    },
    flatMap: function flatMap(funk) {
      var funkk = function funkk(val) {
        return funk(val)._value;
      };
      return create(m1.flatMap(funkk, this._value, m2));
    }
  };
  function create(value) {
    var obj = Object.create(proto);
    obj._value = value;
    return obj;
  }

  function make(value) {
    return create(m2.of(m1.of(value)));
  }
  make.prototype = proto;
  return make;
};

exports.print = function print(val) {
  console.log(val);return val;
};

},{"./comp":1,"./data":3,"./prim":5}],3:[function(require,module,exports){
'use strict';

exports.id = {
  name: 'id',
  of: function of(val) {
    return { idVal: val };
  },
  map: function map(funk, val) {
    return {
      idVal: funk(val.idVal)
    };
  },
  flatMap: function flatMap(funk, val, innerMonad) {
    return innerMonad.flatMap(function (innerId) {
      return funk(innerId.idVal);
    }, val, innerMonad.inner);
  }
};

exports.maybe = {
  name: 'maybe',
  of: function of(val) {
    return { maybeVal: val };
  },
  map: function map(funk, val) {
    return {
      maybeVal: val.maybeVal === undefined ? val.maybeVal : funk(val.maybeVal)
    };
  },
  flatMap: function flatMap(funk, val, innerMonad) {
    return innerMonad.flatMap(function (innerMaybe) {
      return innerMaybe.maybeVal === undefined ? innerMaybe.maybeVal : funk(innerMaybe.maybeVal);
    }, val, innerMonad.inner);
  }
};
exports.list = {
  name: 'list',
  of: function of(val) {
    return val.constructor === Array ? val : [val];
  },
  map: function map(funk, val) {
    return val.map(funk);
  },
  flatMap: function flatMap(funk, val, innerMonad) {
    return innerMonad.flatMap(function (innerList) {
      return innerList.reduce(function (list, val) {
        return list.concat(funk(val));
      });
    }, val, innerMonad.inner);
  }
};

},{}],4:[function(require,module,exports){
'use strict';

exports.prim = require('./prim');
exports.data = require('./data');
exports.comp = require('./comp');

// The ID monad is at the bottom of each monad stack
var id = {
  of: function of(val) {
    return val;
  },
  map: function map(funk, val) {
    return funk(val);
  },
  flatMap: function flatMap(funk, val) {
    return funk(val);
  }
};

exports.make = function make_monad(m1, m2) {
  m1.inner = m2;
  m2.inner = id;
  var proto = {
    map: function map(funk) {
      return create(m2.map(function (val) {
        return m1.map(funk, val);
      }, this._value));
    },
    flatMap: function flatMap(funk) {
      var funkk = function funkk(val) {
        return funk(val)._value;
      };
      return create(m1.flatMap(funkk, this._value, m2));
    }
  };

  function create(value) {
    var obj = Object.create(proto);
    obj._value = value;
    return obj;
  }

  function make(value) {
    return create(m2.of(m1.of(value)));
  }

  make.prototype = proto;
  return make;
};

exports.print = function print(val) {
  console.log(val);return val;
};

},{"./comp":1,"./data":3,"./prim":5}],5:[function(require,module,exports){
"use strict";

},{}]},{},[1,2,3,4,5])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvYm9yaXNtYXJpbm92L3Nvbm5lL2xpYi9jb21wLmpzIiwiL1VzZXJzL2JvcmlzbWFyaW5vdi9zb25uZS9saWIvY29yZS5qcyIsIi9Vc2Vycy9ib3Jpc21hcmlub3Yvc29ubmUvbGliL2RhdGEuanMiLCIvVXNlcnMvYm9yaXNtYXJpbm92L3Nvbm5lL2xpYi9tYWluLmpzIiwibGliL3ByaW0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE9BQU8sQ0FBQyxPQUFPLEdBQUc7QUFDaEIsTUFBSSxFQUFFLFNBQVM7QUFDZixJQUFFLEVBQUUsWUFBVSxHQUFHLEVBQUU7QUFBQyxXQUFPLFVBQVUsT0FBTyxFQUFFO0FBQUUsYUFBTyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUE7S0FBQyxDQUFBO0dBQUU7QUFDdEUsS0FBRyxFQUFFLGFBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUN4QixXQUFPLFVBQVUsT0FBTyxFQUFFO0FBQ3hCLFNBQUcsQ0FBQyxVQUFVLEtBQUssRUFBRTtBQUNuQixlQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQTtPQUM1QixDQUFDLENBQUE7S0FDSCxDQUFBO0dBQ0Y7O0FBRUQsTUFBSSxFQUFFLGNBQVUsR0FBRyxFQUFFLFVBQVUsRUFBRTtBQUMvQixXQUFPLFVBQVUsT0FBTyxFQUFFO0FBQ3hCLFNBQUcsQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUNmLGtCQUFVLENBQUMsR0FBRyxDQUFDLFVBQVUsWUFBWSxFQUFFO0FBQ3JDLHNCQUFZLENBQUMsVUFBVSxLQUFLLEVBQUU7QUFDNUIsbUJBQU8sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFlBQVk7QUFBQyxxQkFBTyxLQUFLLENBQUE7YUFBQyxFQUFFLENB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RyxDQUFDLENBQUE7T0FDekIsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQTtLQUNqQjtBQUNELFdBQU8sRUFBRSxpQkFBVSxJQUFJLEVBQUU7QUFDdkIsVUFBSSxLQUFLLEdBQUcsU0FBUixLQUFLLENBQWEsR0FBRyxFQUFFO0FBQ3pCLGVBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQTtPQUN4QixDQUFBO0FBQ0QsYUFBTyxNQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO0tBQ2xEO0dBQ0YsQ0FBQTs7QUFFRCxXQUFTLE1BQU0sQ0FBRSxLQUFLLEVBQUU7QUFDdEIsUUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUM5QixPQUFHLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQTtBQUNsQixXQUFPLEdBQUcsQ0FBQTtHQUNYOztBQUVELFdBQVMsSUFBSSxDQUFFLEtBQUssRUFBRTtBQUNwQixXQUFPLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0dBQ25DOztBQUVELE1BQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFBO0FBQ3RCLFNBQU8sSUFBSSxDQUFBO0NBQ1osQ0FBQTs7QUFFRCxPQUFPLENBQUMsS0FBSyxHQUFHLFNBQVMsS0FBSyxDQUFFLEdBQUcsRUFBRTtBQUFDLFNBQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUE7Q0FBQyxDQUFBOzs7QUNoRGxFO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0cy5wcm9taXNlID0ge1xuICBuYW1lOiAncHJvbWlzZScsXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7cmV0dXJuIGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJldHVybiByZXNvbHZlKHZhbCl9IH0sXG4gIG1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgdmFsKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShmdW5rKHZhbHVlKSlcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuXG4gIGZsYXQ6IGZ1bmN0aW9uICh2YWwsIGlubmVyTW9uYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIHZhbChmdW5jdGlvbiAoaSkge1xuICAgICAgICBpbm5lck1vbmFkLm1hcChmdW5jdGlvbiAoaW5uZXJQcm9taXNlKSB7XG4gICAgICAgICAgaW5uZXJQcm9taXNlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmVzb2x2ZShpbm5lck1vbmFkLm1hcChmdW5jdGlvbiAoKSB7cmV0dXJuIHZhbHVlfSwgaSkpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSwgaSlcblxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydHMucHJpbSA9IHJlcXVpcmUoJy4vcHJpbScpXG5leHBvcnRzLmRhdGEgPSByZXF1aXJlKCcuL2RhdGEnKVxuZXhwb3J0cy5jb21wID0gcmVxdWlyZSgnLi9jb21wJylcblxudmFyIGlkID0ge1xuICBmbGF0TWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XG4gICAgcmV0dXJuIGZ1bmsodmFsKVxuICB9XG5cbn1cblxuZXhwb3J0cy5tYWtlID0gZnVuY3Rpb24gbWFrZV9tb25hZCAobTEsIG0yKSB7XG4gIG0xLmlubmVyID0gbTJcbiAgbTIuaW5uZXIgPSBpZFxuICB2YXIgcHJvdG8gPSB7XG4gICAgbWFwOiBmdW5jdGlvbiAoZnVuaykge1xuICAgICAgcmV0dXJuIGNyZWF0ZShtMi5tYXAoZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gbTEubWFwKGZ1bmssIHZhbClcbiAgICAgIH0sIHRoaXMuX3ZhbHVlKSlcbiAgICB9LFxuICAgIGZsYXRNYXA6IGZ1bmN0aW9uIChmdW5rKSB7XG4gICAgICB2YXIgZnVua2sgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBmdW5rKHZhbCkuX3ZhbHVlXG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlKG0xLmZsYXRNYXAoZnVua2ssIHRoaXMuX3ZhbHVlLCBtMikpXG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZSAodmFsdWUpIHtcbiAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShwcm90bylcbiAgICBvYmouX3ZhbHVlID0gdmFsdWVcbiAgICByZXR1cm4gb2JqXG4gIH1cblxuICBmdW5jdGlvbiBtYWtlICh2YWx1ZSkge1xuICAgIHJldHVybiBjcmVhdGUobTIub2YobTEub2YodmFsdWUpKSlcbiAgfVxuICBtYWtlLnByb3RvdHlwZSA9IHByb3RvXG4gIHJldHVybiBtYWtlXG59XG5cbmV4cG9ydHMucHJpbnQgPSBmdW5jdGlvbiBwcmludCAodmFsKSB7Y29uc29sZS5sb2codmFsKTtyZXR1cm4gdmFsfVxuIiwiZXhwb3J0cy5pZCA9IHtcbiAgbmFtZTogJ2lkJyxcbiAgb2Y6IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHtpZFZhbDogdmFsIH0gfSxcbiAgbWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkVmFsOiBmdW5rKHZhbC5pZFZhbClcbiAgICB9XG4gIH0sXG4gIGZsYXRNYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwsIGlubmVyTW9uYWQpIHtcbiAgICByZXR1cm4gaW5uZXJNb25hZC5mbGF0TWFwKGZ1bmN0aW9uIChpbm5lcklkKSB7XG4gICAgICByZXR1cm4gZnVuayhpbm5lcklkLmlkVmFsKVxuICAgIH0sIHZhbCwgaW5uZXJNb25hZC5pbm5lcilcbiAgfVxufVxuXG5leHBvcnRzLm1heWJlID0ge1xuICBuYW1lOiAnbWF5YmUnLFxuICBvZjogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4ge21heWJlVmFsOiB2YWwgfSB9LFxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcbiAgICByZXR1cm4ge1xuICAgIG1heWJlVmFsOiB2YWwubWF5YmVWYWwgPT09IHVuZGVmaW5lZCA/IHZhbC5tYXliZVZhbCA6IGZ1bmsodmFsLm1heWJlVmFsKVxuICAgIH1cbiAgfSxcbiAgZmxhdE1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCwgaW5uZXJNb25hZCkge1xuICAgIHJldHVybiBpbm5lck1vbmFkLmZsYXRNYXAoZnVuY3Rpb24gKGlubmVyTWF5YmUpIHtcbiAgICAgIHJldHVybiBpbm5lck1heWJlLm1heWJlVmFsID09PSB1bmRlZmluZWQgPyBpbm5lck1heWJlLm1heWJlVmFsIDogZnVuayhpbm5lck1heWJlLm1heWJlVmFsKVxuICAgIH0sIHZhbCwgaW5uZXJNb25hZC5pbm5lcilcbiAgfVxufVxuZXhwb3J0cy5saXN0ID0ge1xuICBuYW1lOiAnbGlzdCcsXG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB2YWwuY29uc3RydWN0b3IgPT09IEFycmF5ID8gdmFsIDogW3ZhbF0gfSxcbiAgbWFwOiBmdW5jdGlvbiAoZnVuaywgdmFsKSB7XG4gICAgcmV0dXJuIHZhbC5tYXAoZnVuaylcbiAgfSxcbiAgZmxhdE1hcDogZnVuY3Rpb24gKGZ1bmssIHZhbCwgaW5uZXJNb25hZCkge1xuICAgIHJldHVybiBpbm5lck1vbmFkLmZsYXRNYXAoZnVuY3Rpb24gKGlubmVyTGlzdCkge1xuICAgICAgcmV0dXJuIGlubmVyTGlzdC5yZWR1Y2UoKGxpc3QsIHZhbCkgPT4gbGlzdC5jb25jYXQoZnVuayh2YWwpKSlcbiAgICB9LCB2YWwsIGlubmVyTW9uYWQuaW5uZXIpXG4gIH1cbn1cbiIsImV4cG9ydHMucHJpbSA9IHJlcXVpcmUoJy4vcHJpbScpXG5leHBvcnRzLmRhdGEgPSByZXF1aXJlKCcuL2RhdGEnKVxuZXhwb3J0cy5jb21wID0gcmVxdWlyZSgnLi9jb21wJylcblxuLy8gVGhlIElEIG1vbmFkIGlzIGF0IHRoZSBib3R0b20gb2YgZWFjaCBtb25hZCBzdGFja1xuY29uc3QgaWQgPSB7XG4gIG9mOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbFxuICB9LFxuICBtYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcbiAgICByZXR1cm4gZnVuayh2YWwpXG4gIH0sXG4gIGZsYXRNYXA6IGZ1bmN0aW9uIChmdW5rLCB2YWwpIHtcbiAgICByZXR1cm4gZnVuayh2YWwpXG4gIH1cbn1cblxuZXhwb3J0cy5tYWtlID0gZnVuY3Rpb24gbWFrZV9tb25hZCAobTEsIG0yKSB7XG4gIG0xLmlubmVyID0gbTJcbiAgbTIuaW5uZXIgPSBpZFxuICB2YXIgcHJvdG8gPSB7XG4gICAgbWFwOiBmdW5jdGlvbiAoZnVuaykge1xuICAgICAgcmV0dXJuIGNyZWF0ZShtMi5tYXAoZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gbTEubWFwKGZ1bmssIHZhbClcbiAgICAgIH0sIHRoaXMuX3ZhbHVlKSlcbiAgICB9LFxuICAgIGZsYXRNYXA6IGZ1bmN0aW9uIChmdW5rKSB7XG4gICAgICB2YXIgZnVua2sgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBmdW5rKHZhbCkuX3ZhbHVlXG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlKG0xLmZsYXRNYXAoZnVua2ssIHRoaXMuX3ZhbHVlLCBtMikpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlICh2YWx1ZSkge1xuICAgIHZhciBvYmogPSBPYmplY3QuY3JlYXRlKHByb3RvKVxuICAgIG9iai5fdmFsdWUgPSB2YWx1ZVxuICAgIHJldHVybiBvYmpcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ha2UgKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNyZWF0ZShtMi5vZihtMS5vZih2YWx1ZSkpKVxuICB9XG5cbiAgbWFrZS5wcm90b3R5cGUgPSBwcm90b1xuICByZXR1cm4gbWFrZVxufVxuXG5leHBvcnRzLnByaW50ID0gZnVuY3Rpb24gcHJpbnQgKHZhbCkge2NvbnNvbGUubG9nKHZhbCk7cmV0dXJuIHZhbH1cbiIsIlwidXNlIHN0cmljdFwiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYlhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWlJc0ltWnBiR1VpT2lJdlZYTmxjbk12WW05eWFYTnRZWEpwYm05MkwzTnZibTVsTDJ4cFlpOXdjbWx0TG1weklpd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sdGRmUT09Il19
